import{Q as C,d as q,j as V}from"./QTable.cacd9f5a.js";import{Q as n}from"./QCardSection.3d381cf6.js";import{Q as x}from"./QInput.66b81590.js";import{aR as k,r as p,s as d,v as U,x as B,y as r,d as t,z as a,Q as f,F as R,aW as Q,aN as D}from"./index.d5febfd2.js";import{Q as N}from"./QCardActions.c9f90f1c.js";import{Q as $}from"./QCard.1640a865.js";import{C as A}from"./ClosePopup.bbdaeb47.js";import"./use-key-composition.bf0cfc1a.js";import"./QCheckbox.1220c320.js";const F={class:"q-pa-md text-center"},P={class:"q-pa-md text-center"},S=r("h4",{class:""},"\u6211\u8981\u9810\u7D04",-1),T=r("div",{class:"text-h6"},"\u59D3\u540D",-1),j=r("div",{class:"text-h6"},"\u4EBA\u6578",-1),z=r("div",{class:"text-h6"},"\u65E5\u671F",-1),E=r("div",{class:"text-h6"},"\u6642\u9593",-1),Z={__name:"ReservePage",setup(I){var g,h;const i=k(),u=p("false"),_=p(!1),b=p([]),m=d([]),c=d([]);(async()=>{const l=await Q.get("/reserve");let e=0;for(e=0;e<l.data.result.length;e++)l.data.result[e].member<=0||(v.push({date:l.data.result[e].date,time:l.data.result[e].time,member:l.data.result[e].member,id:l.data.result[e]._id}),m.includes(l.data.result[e].date)||m.push(l.data.result[e].date),c.includes(l.data.result[e].time)||c.push(l.data.result[e].time));i.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u53D6\u5F97\u6210\u529F"})})();const o=d({name:"",member:"",time:((g=b.value[0])==null?void 0:g.time)||"",date:((h=b.value[0])==null?void 0:h.date)||""}),w=async()=>{try{console.log(o);const l=await Q.post("/reserve/make",o);console.log(l),i.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u6210\u529F"})}catch{i.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u5931\u6557\uFF0C\u8ACB\u9078\u64C7\u5176\u4ED6\u6642\u9593"})}},y=[{name:"date",required:!0,label:"\u65E5\u671F",align:"center",field:l=>l.date,format:l=>`${l}`,sortable:!0},{name:"time",align:"center",label:"\u6642\u9593",field:"time",sortable:!0},{name:"member",align:"center",label:"\u5269\u9918",field:"member",sortable:!0}],v=d([]);return(l,e)=>(U(),B(R,null,[r("section",F,[t(C,{title:"\u53EF\u4F9B\u9810\u7D04\u6642\u9593",rows:v,columns:y,"row-key":"id"},null,8,["rows"])]),r("div",P,[S,t(q,{modelValue:u.value,"onUpdate:modelValue":e[4]||(e[4]=s=>u.value=s),persistent:""},{default:a(()=>[t($,{style:{"min-width":"400px"}},{default:a(()=>[t(n,null,{default:a(()=>[T]),_:1}),t(n,{class:"q-pt-none"},{default:a(()=>[t(x,{outlined:"",modelValue:o.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.name=s),placeholder:"\u59D3\u540D",hint:"\u59D3\u540D",dense:_.value},null,8,["modelValue","dense"])]),_:1}),t(n,null,{default:a(()=>[j]),_:1}),t(n,{class:"q-pt-none"},{default:a(()=>[t(x,{outlined:"",modelValue:o.member,"onUpdate:modelValue":e[1]||(e[1]=s=>o.member=s),placeholder:"\u4EBA\u6578",hint:"\u4EBA\u6578",dense:_.value},null,8,["modelValue","dense"])]),_:1}),t(n,null,{default:a(()=>[z]),_:1}),t(n,{class:"q-pt-none"},{default:a(()=>[t(V,{modelValue:o.date,"onUpdate:modelValue":e[2]||(e[2]=s=>o.date=s),options:m,label:"\u65E5\u671F"},null,8,["modelValue","options"])]),_:1}),t(n,null,{default:a(()=>[E]),_:1}),t(n,{class:"q-pt-none"},{default:a(()=>[t(V,{modelValue:o.time,"onUpdate:modelValue":e[3]||(e[3]=s=>o.time=s),options:c,label:"\u6642\u9593"},null,8,["modelValue","options"])]),_:1}),t(N,{align:"right",class:"text-white"},{default:a(()=>[D(t(f,{flat:"",label:"\u53D6\u6D88",color:"secondary"},null,512),[[A]]),t(f,{onClick:w,label:"\u9810\u7D04",color:"teal"})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(f,{label:"\u6211\u8981\u9810\u7D04",color:"primary",onClick:e[5]||(e[5]=s=>u.value=!0)})])],64))}};export{Z as default};
