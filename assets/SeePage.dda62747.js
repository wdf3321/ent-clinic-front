import{v as f,x as g,r as p,y as l,z as v,A as m,f as c,B as h,H as y,I as _,b6 as n,P as w,Q as x}from"./index.09be9134.js";import{Q as k}from"./QTable.f74a1eef.js";import{h as i}from"./moment.9709ab41.js";import"./use-key-composition.768c978b.js";import"./QCheckbox.329922fb.js";const B=m("h4",{class:"text-center"},"\u9810\u7D04\u67E5\u8A62",-1),C={class:"q-pa-md-xl text-center"},A={__name:"SeePage",setup(Q){const o=f(),a=async()=>{try{const{data:e}=await n.get("/users");let t=0;for(t=0;t<e.result.reserve.length;t++)i(e.result.reserve[t].date).isBefore(i().format("YYYY/MM/DD"))||(r.push({id:e.result.reserve[t]._id,date:e.result.reserve[t].date,time:e.result.reserve[t].time,name:e.result.reserve[t].name,member:e.result.reserve[t].member,success:"\u6210\u529F"}),o.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u53D6\u5F97\u6210\u529F"}))}catch(e){console.log(e)}};a();const d=[{name:"name",align:"left",label:"\u59D3\u540D",field:"name",sortable:!0},{name:"date",required:!0,label:"\u65E5\u671F",align:"center",field:"date",sortable:!0},{name:"time",align:"center",label:"\u6642\u9593",field:"time",sortable:!0},{name:"member",align:"center",label:"\u4EBA\u6578",field:"member",sortable:!0},{name:"success",align:"center",label:"\u6210\u529F",field:"success",sortable:!0}],r=g([]),s=p([]),u=async()=>{try{console.log(s.value[0]);const e={id:s.value[0].id,time:s.value[0].time,date:s.value[0].date,member:s.value[0].member},t=await n.post("/reserve/cancel",e);for(console.log(t),o.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u522A\u9664\u6210\u529F"});r.length;)r.pop();a()}catch(e){console.log(e),o.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u522A\u9664\u5931\u6557"})}};return(e,t)=>(l(),v("section",null,[B,m("div",C,[c(k,{class:"my-sticky-header-table",title:"",rows:r,columns:d,"row-key":"id",flat:"",bordered:"","no-data-label":"\u54ED\u963F\uFF0C\u4F60\u5C1A\u672A\u9810\u7D04\u4EFB\u4F55\u6642\u9593",selection:"single",selected:s.value,"onUpdate:selected":t[0]||(t[0]=b=>s.value=b)},{"body-cell-success":h(()=>[c(w,{name:"check",size:"50px",color:"primary"})]),_:1},8,["rows","selected"]),s.value[0]?(l(),y(x,{key:0,color:"teal",icon:"delete",onClick:u,label:"\u522A\u9664\u9810\u7D04",class:"q-ma-md"})):_("",!0)])]))}};export{A as default};
