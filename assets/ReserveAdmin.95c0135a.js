import{Q as v}from"./QTable.cacd9f5a.js";import{r as y,aR as w,s as _,v as x,x as h,y as k,d as f,Q as b,aW as p}from"./index.d5febfd2.js";import"./use-key-composition.bf0cfc1a.js";import"./QCheckbox.1220c320.js";function g(r){setTimeout(()=>{window.URL.revokeObjectURL(r.href)},1e4),r.remove()}function R(r,s,n={}){const{mimeType:i,byteOrderMark:l,encoding:m}=typeof n=="string"?{mimeType:n}:n,d=m!==void 0?new TextEncoder(m).encode([s]):s,c=l!==void 0?[l,d]:[d],u=new Blob(c,{type:i||"application/octet-stream"}),e=document.createElement("a");e.href=window.URL.createObjectURL(u),e.setAttribute("download",r),typeof e.download=="undefined"&&e.setAttribute("target","_blank"),e.classList.add("hidden"),e.style.position="fixed",document.body.appendChild(e);try{return e.click(),g(e),!0}catch(t){return g(e),t}}const C={class:"q-pa-md text-center"},Q={__name:"ReserveAdmin",setup(r){const s=y([]),n=w(),i=[{name:"_id",required:!0,label:"_id",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"name",align:"center",label:"name",field:"name",sortable:!0},{name:"date",label:"date",field:"date",sortable:!0},{name:"time",label:"time",field:"time",sortable:!0},{name:"member",label:"member",field:"member",sortable:!0}],l=_([]);(async()=>{const e=await p.get("/reserve/all");console.log(e.data.message);let t=0;for(t=0;t<e.data.message.length;t++)l.push({date:e.data.message[t].date,time:e.data.message[t].time,member:e.data.message[t].member,id:e.data.message[t]._id,name:e.data.message[t].name});n.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u53D6\u5F97\u6210\u529F"})})();const d=async()=>{try{console.log(s.value[0].id);const e=await p.delete(`/reserve/delete/${s.value[0].id}`);console.log(e),n.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u53D6\u5F97\u6210\u529F"})}catch(e){console.log(e),n.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u9810\u7D04\u53D6\u5F97\u6210\u529F"})}};function c(e,t,a){let o=t!==void 0?t(e,a):e;return o=o==null?"":String(o),o=o.split('"').join('""'),`"${o}"`}function u(){const e=[i.map(a=>c(a.label))].concat(l.map(a=>i.map(o=>c(typeof o.field=="function"?o.field(a):a[o.field===void 0?o.name:o.field],o.format,a)).join(","))).join(`\r
`);R("table-export.csv",e,"text/csv")!==!0&&n.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})}return(e,t)=>(x(),h("section",null,[k("div",C,[f(v,{title:"\u9810\u7D04\u7BA1\u7406",rows:l,columns:i,"row-key":"id",selection:"single",selected:s.value,"onUpdate:selected":t[0]||(t[0]=a=>s.value=a)},null,8,["rows","selected"]),f(b,{color:"primary",icon:"archive",label:"\u7522\u751Fcsv","no-caps":"",onClick:u}),f(b,{color:"teal",icon:"delete",onClick:d,class:"q-ma-xl",label:"\u522A\u9664"})])]))}};export{Q as default};
