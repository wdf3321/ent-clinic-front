import{b0 as M,b1 as w,r as C,aR as N,s as P,t as c,v as k,x as a,b2 as f,D as x,E as _,aP as q,f as e,Q as i,y as l,F as $,H as I,M as A,aN as v,aW as T}from"./index.6832796b.js";import{Q as j}from"./QTable.a1535b4d.js";import{Q as d}from"./QCardSection.e3f9bfb4.js";import{Q as D,a as E}from"./QPopupProxy.2780de9c.js";import{Q as F}from"./QTime.abf6fa6f.js";import{Q as g}from"./QInput.4a30f91e.js";import{Q as R}from"./QCardActions.f876626c.js";import{Q as z}from"./QCard.439859a5.js";import{b as W}from"./QSelect.f9e87b1a.js";import{C as b}from"./ClosePopup.435e6220.js";import{u as G}from"./vue-i18n.runtime.esm-bundler.22815b5c.js";import"./QCheckbox.fa88a2cd.js";import"./use-key-composition.4fb6c708.js";import"./use-cache.b0833c75.js";const J={key:1},K={class:"q-pa-md text-center"},L={class:"q-mt-xl"},O={class:"text-center",id:"btns"},X=a("div",{class:"text-h6"},"\u65E5\u671F",-1),Z={class:"row items-center justify-end"},ee={class:"row items-center justify-end"},te=a("div",{class:"text-h6"},"\u6A19\u984C",-1),le=a("div",{class:"text-h6"},"\u5167\u5BB9",-1),ve={__name:"ArticleAdmin",setup(oe){const{articles:m,loading:Y,error:Q}=M(w()),{t:V}=G(),r=C([]),p=C(!1),y=N(),o=P({date:"2022-01-01 00:00",title:"",inside:""}),u=w();u.getArticles();const U=()=>{u.deleteArticle()},S=async()=>{var n;try{const t=await T.delete(`/articles/delete/${(n=r.value[0])==null?void 0:n._id}`);for(console.log(t),y.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u6210\u529F"});m.length;)m.pop();u.getArticles()}catch(t){console.log(t),y.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u5931\u6557"})}},B=()=>{for(u.createArticle(o),y.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u65B0\u589E\u6210\u529F"}),p.value=!1,o.date="",o.title="",o.inside="";m.length;)m.pop();u.getArticles()},H=[{name:"date",required:!0,label:V("time"),align:"left",field:n=>n.date,sortable:!0},{name:"title",align:"left",label:V("title"),field:"title",sortable:!0},{name:"id",align:"right",label:"id",field:"_id",sortable:!0}];return(n,t)=>{var h;return c(),k($,null,[a("section",null,[f(Y)?(c(),x(I,{key:0,color:"primary",size:"500px"})):_("",!0),f(Q)?(c(),k("p",J,q(f(Q).message),1)):_("",!0),a("div",K,[e(j,{title:n.$t("articleadmin"),rows:f(m),columns:H,"row-key":"title",selection:"single",selected:r.value,"onUpdate:selected":t[0]||(t[0]=s=>r.value=s)},null,8,["title","rows","selected"]),a("div",L,"\u5167\u5BB9\u9810\u89BD\uFF1A"+q((h=r.value[0])==null?void 0:h.inside),1)]),a("section",null,[a("div",O,[e(i,{icon:"add",color:"primary",onClick:t[1]||(t[1]=s=>p.value=!0),class:"q-mr-md-xl q-my-xs-xs",label:"\u65B0\u589E\u6D88\u606F"}),r.value[0]?_("",!0):(c(),x(i,{key:0,onClick:U,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u6700\u820A",class:"q-mr-md-xl q-my-xs-xs"})),r.value[0]?(c(),x(i,{key:1,onClick:S,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u9078\u64C7",class:"q-mr-md-xl q-my-xs-xs"})):_("",!0)])])]),e(W,{modelValue:p.value,"onUpdate:modelValue":t[7]||(t[7]=s=>p.value=s),persistent:""},{default:l(()=>[e(z,{style:{"min-width":"400px"}},{default:l(()=>[e(d,null,{default:l(()=>[X]),_:1}),e(d,{class:"q-pt-none"},{default:l(()=>[e(g,{filled:"",modelValue:o.date,"onUpdate:modelValue":t[4]||(t[4]=s=>o.date=s)},{prepend:l(()=>[e(A,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(D,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(E,{modelValue:o.date,"onUpdate:modelValue":t[2]||(t[2]=s=>o.date=s),mask:"YYYY-MM-DD HH:mm"},{default:l(()=>[a("div",Z,[v(e(i,{label:"Close",color:"primary",flat:""},null,512),[[b]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:l(()=>[e(A,{name:"access_time",class:"cursor-pointer"},{default:l(()=>[e(D,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(F,{modelValue:o.date,"onUpdate:modelValue":t[3]||(t[3]=s=>o.date=s),mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},{default:l(()=>[a("div",ee,[v(e(i,{label:"Close",color:"primary",flat:""},null,512),[[b]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[te]),_:1}),e(d,{class:"q-pt-none"},{default:l(()=>[e(g,{modelValue:o.title,"onUpdate:modelValue":t[5]||(t[5]=s=>o.title=s),outline:"",type:"text",hint:"\u6A19\u984C"},null,8,["modelValue"])]),_:1}),e(d,null,{default:l(()=>[le]),_:1}),e(d,{class:"q-pt-none"},{default:l(()=>[e(g,{modelValue:o.inside,"onUpdate:modelValue":t[6]||(t[6]=s=>o.inside=s),outline:"",hint:"\u5167\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1}),e(R,{align:"right",class:"text-white"},{default:l(()=>[v(e(i,{flat:"",color:"secondary",label:"\u53D6\u6D88"},null,512),[[b]]),e(i,{color:"teal",label:"\u65B0\u589E",onClick:B})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{ve as default};
