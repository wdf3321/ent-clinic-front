import{Q as i}from"./QTable.cacd9f5a.js";import{aR as u,r as m,s as f,v as p,x as g,y as b,d as s,Q as h,aW as r}from"./index.d5febfd2.js";import"./use-key-composition.bf0cfc1a.js";import"./QCheckbox.1220c320.js";const _={class:"q-pa-md text-center"},k={__name:"UserAdmin",setup(w){const a=u(),l=m([]),n=[{name:"id",required:!0,label:"id",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"account",align:"left",label:"account",field:"account",sortable:!0},{name:"name",align:"left",label:"name",field:"name",sortable:!0},{name:"phone",align:"left",label:"phone",field:"phone",sortable:!0},{name:"role",align:"left",label:"role",field:"role",sortable:!0}],o=f([]);(async()=>{const e=await r.get("/users/all");console.log(e.data.result.data);let t=0;for(t=0;t<e.data.result.data.length;t++)o.push({id:e.data.result.data[t]._id,account:e.data.result.data[t].account,name:e.data.result.data[t].name,phone:"0"+e.data.result.data[t].phone,role:e.data.result.data[t].role});a.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u6703\u54E1\u53D6\u5F97\u6210\u529F"})})();const c=async()=>{try{const e=await r.delete(`/users/${l.value[0].id}`);console.log(e),a.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u6210\u529F"})}catch{a.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u5931\u6557"})}};return(e,t)=>(p(),g("section",null,[b("div",_,[s(i,{title:"\u6703\u54E1\u7BA1\u7406",rows:o,columns:n,"row-key":"name",selection:"single",selected:l.value,"onUpdate:selected":t[0]||(t[0]=d=>l.value=d)},null,8,["rows","selected"]),s(h,{icon:"delete",label:"\u522A\u9664",onClick:c,class:"q-ma-xl",color:"teal"})])]))}};export{k as default};
