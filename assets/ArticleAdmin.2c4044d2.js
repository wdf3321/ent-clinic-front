import{b1 as M,b2 as V,r as h,aR as H,s as N,t as p,v as w,x as a,b3 as f,D as C,aW as x,aO as A,f as e,Q as i,y as l,F as P,G as T,L as k,aM as y,aX as $}from"./index.2e4e4508.js";import{Q as j,e as F}from"./QTable.68509b41.js";import{Q as n}from"./QCardSection.fcd6ffcb.js";import{Q as q,a as I}from"./QPopupProxy.1e41ce76.js";import{Q as R}from"./QTime.68b63bf7.js";import{Q as v}from"./QInput.980ca0a4.js";import{Q as z}from"./QCardActions.000c5eb8.js";import{Q as E}from"./QCard.d64101f1.js";import{C as g}from"./ClosePopup.eb1deeb6.js";import"./use-key-composition.134a8d1b.js";import"./QCheckbox.e5f91381.js";import"./use-cache.b0833c75.js";const G={key:1},L={class:"q-pa-md text-center"},O={class:"q-mt-xl"},W={class:"text-center",id:"btns"},X=a("div",{class:"text-h6"},"\u65E5\u671F",-1),J={class:"row items-center justify-end"},K={class:"row items-center justify-end"},Z=a("div",{class:"text-h6"},"\u6A19\u984C",-1),ee=a("div",{class:"text-h6"},"\u5167\u5BB9",-1),fe={__name:"ArticleAdmin",setup(te){const{articles:r,loading:D,error:b}=M(V()),d=h([]),m=h(!1),_=H(),o=N({date:"2022-01-01 00:00",title:"",inside:""}),c=V();c.getArticles();const Y=()=>{c.deleteArticle()},U=async()=>{var u;try{const t=await $.delete(`/articles/delete/${(u=d.value[0])==null?void 0:u._id}`);for(console.log(t),_.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u6210\u529F"});r.length;)r.pop();c.getArticles()}catch(t){console.log(t),_.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u5931\u6557"})}},S=()=>{for(c.createArticle(o),_.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u65B0\u589E\u6210\u529F"}),m.value=!1,o.date="",o.title="",o.inside="";r.length;)r.pop();c.getArticles()},B=[{name:"date",required:!0,label:"\u6642\u9593",align:"left",field:u=>u.date,sortable:!0},{name:"title",align:"left",label:"\u6A19\u984C",field:"title",sortable:!0},{name:"id",align:"right",label:"id",field:"_id",sortable:!0}];return(u,t)=>{var Q;return p(),w(P,null,[a("section",null,[f(D)?(p(),C(T,{key:0,color:"primary",size:"500px"})):x("",!0),f(b)?(p(),w("p",G,A(f(b).message),1)):x("",!0),a("div",L,[e(j,{title:"\u6D88\u606F\u7BA1\u7406",rows:f(r),columns:B,"row-key":"title",selection:"single",selected:d.value,"onUpdate:selected":t[0]||(t[0]=s=>d.value=s)},null,8,["rows","selected"]),a("div",O,"\u5167\u5BB9\u9810\u89BD\uFF1A"+A((Q=d.value[0])==null?void 0:Q.inside),1)]),a("section",null,[a("div",W,[e(i,{icon:"add",color:"primary",onClick:t[1]||(t[1]=s=>m.value=!0),class:"q-mr-md-xl q-my-xs-xs",label:"\u65B0\u589E\u6D88\u606F"}),e(i,{onClick:Y,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u6700\u820A",class:"q-mr-md-xl q-my-xs-xs"}),d.value[0]?(p(),C(i,{key:0,onClick:U,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u9078\u64C7",class:"q-mr-md-xl q-my-xs-xs"})):x("",!0)])])]),e(F,{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=s=>m.value=s),persistent:""},{default:l(()=>[e(E,{style:{"min-width":"400px"}},{default:l(()=>[e(n,null,{default:l(()=>[X]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{filled:"",modelValue:o.date,"onUpdate:modelValue":t[4]||(t[4]=s=>o.date=s)},{prepend:l(()=>[e(k,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(I,{modelValue:o.date,"onUpdate:modelValue":t[2]||(t[2]=s=>o.date=s),mask:"YYYY-MM-DD HH:mm"},{default:l(()=>[a("div",J,[y(e(i,{label:"Close",color:"primary",flat:""},null,512),[[g]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:l(()=>[e(k,{name:"access_time",class:"cursor-pointer"},{default:l(()=>[e(q,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:o.date,"onUpdate:modelValue":t[3]||(t[3]=s=>o.date=s),mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},{default:l(()=>[a("div",K,[y(e(i,{label:"Close",color:"primary",flat:""},null,512),[[g]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:l(()=>[Z]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{modelValue:o.title,"onUpdate:modelValue":t[5]||(t[5]=s=>o.title=s),outline:"",type:"text",hint:"\u6A19\u984C"},null,8,["modelValue"])]),_:1}),e(n,null,{default:l(()=>[ee]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{modelValue:o.inside,"onUpdate:modelValue":t[6]||(t[6]=s=>o.inside=s),outline:"",hint:"\u5167\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1}),e(z,{align:"right",class:"text-white"},{default:l(()=>[y(e(i,{flat:"",color:"secondary",label:"\u53D6\u6D88"},null,512),[[g]]),e(i,{color:"teal",label:"\u65B0\u589E",onClick:S})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{fe as default};
