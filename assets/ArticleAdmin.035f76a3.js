import{aX as N,aY as k,r as P,aR as $,s as z,v as i,x as f,y as s,aZ as m,E as V,a_ as A,aP as _,d as e,z as l,Q as n,F as Q,H as j,C as q,aN as x,aO as E,D as y,M as D}from"./index.4fc50fb4.js";import{Q as F,d as I,c as Y}from"./QTable.45c2df84.js";import{Q as w,a as b}from"./QTd.d74c7e2a.js";import{Q as r}from"./QCardSection.9d80e91f.js";import{Q as U,a as R,b as L}from"./QTime.98b16e8c.js";import{Q as g}from"./QInput.d80e9bc5.js";import{Q as O}from"./QCardActions.692749bf.js";import{Q as X}from"./QCard.9be33f9d.js";import{C}from"./ClosePopup.9ce12936.js";import"./use-key-composition.66f2c17d.js";import"./QCheckbox.d43d84e2.js";import"./use-cache.b0833c75.js";const Z=s("h4",{class:"text-center"},"\u6D88\u606F\u7BA1\u7406",-1),G={key:1},J={class:"q-pa-md"},K={class:"text-left"},W={class:"text-center q-pa-xl"},ee=s("div",{class:"text-h6"},"\u65E5\u671F",-1),te={class:"row items-center justify-end"},le={class:"row items-center justify-end"},ae=s("div",{class:"text-h6"},"\u6A19\u984C",-1),oe=s("div",{class:"text-h6"},"\u5167\u5BB9",-1),Ve={__name:"ArticleAdmin",setup(se){const{articles:v,loading:T,error:h}=N(k()),p=P(!1),S=$(),o=z({date:"2022-01-01 00:00",title:"",inside:""}),u=k();u.getArticles();const B=()=>{u.deleteArticle()},H=()=>{for(u.createArticle(o),S.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u65B0\u589E\u6210\u529F"}),p.value=!1,o.date="",o.title="",o.inside="";v.length;)v.pop();u.getArticles()},M=[{name:"date",required:!0,label:"\u6642\u9593",align:"left",field:c=>c.date,sortable:!0},{name:"title",align:"left",label:"\u6A19\u984C",field:"title",sortable:!0},{name:"id",align:"right",label:"id",field:"_id",sortable:!0}];return(c,a)=>(i(),f(Q,null,[s("section",null,[Z,m(T)?(i(),V(j,{key:0,color:"primary",size:"500px"})):A("",!0),m(h)?(i(),f("p",G,_(m(h).message),1)):A("",!0),s("div",J,[e(F,{rows:m(v),columns:M,"row-key":"id",expanded:c.expanded,"onUpdate:expanded":a[2]||(a[2]=t=>c.expanded=t)},{header:l(t=>[e(w,{props:t},{default:l(()=>[e(Y,{"auto-width":""}),(i(!0),f(Q,null,q(t.cols,d=>(i(),V(Y,{key:d.name,props:t},{default:l(()=>[y(_(d.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),body:l(t=>[e(w,{props:t},{default:l(()=>[e(b,{"auto-width":""},{default:l(()=>[e(n,{size:"md",color:"accent",round:"",dense:"",onClick:d=>t.row.expand=!t.row.expand,icon:t.row.expand?"remove":"add"},null,8,["onClick","icon"])]),_:2},1024),(i(!0),f(Q,null,q(t.cols,d=>(i(),V(b,{key:d.name,props:t},{default:l(()=>[y(_(d.value),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"]),x(e(w,{props:t},{default:l(()=>[e(b,{colspan:"100%",modelValue:o.inside,"onUpdate:modelValue":a[1]||(a[1]=d=>o.inside=d)},{default:l(()=>[y(_(t.row.inside)+" ",1),s("div",K,[e(n,{label:"\u522A\u9664",onClick:a[0]||(a[0]=d=>m(u).deleteArticle())})])]),_:2},1032,["modelValue"])]),_:2},1032,["props"]),[[E,t.row.expand]])]),_:1},8,["rows","expanded"])]),s("div",W,[e(n,{icon:"add",color:"primary",onClick:a[3]||(a[3]=t=>p.value=!0),class:"q-mx-lg",label:"\u65B0\u589E\u6D88\u606F"}),e(n,{onClick:B,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u6700\u820A",class:"q-mx-lg"})])]),e(I,{modelValue:p.value,"onUpdate:modelValue":a[9]||(a[9]=t=>p.value=t),persistent:""},{default:l(()=>[e(X,{style:{"min-width":"400px"}},{default:l(()=>[e(r,null,{default:l(()=>[ee]),_:1}),e(r,{class:"q-pt-none"},{default:l(()=>[e(g,{filled:"",modelValue:o.date,"onUpdate:modelValue":a[6]||(a[6]=t=>o.date=t)},{prepend:l(()=>[e(D,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(R,{modelValue:o.date,"onUpdate:modelValue":a[4]||(a[4]=t=>o.date=t),mask:"YYYY-MM-DD HH:mm"},{default:l(()=>[s("div",te,[x(e(n,{label:"Close",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:l(()=>[e(D,{name:"access_time",class:"cursor-pointer"},{default:l(()=>[e(U,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(L,{modelValue:o.date,"onUpdate:modelValue":a[5]||(a[5]=t=>o.date=t),mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},{default:l(()=>[s("div",le,[x(e(n,{label:"Close",color:"primary",flat:""},null,512),[[C]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[ae]),_:1}),e(r,{class:"q-pt-none"},{default:l(()=>[e(g,{modelValue:o.title,"onUpdate:modelValue":a[7]||(a[7]=t=>o.title=t),outline:"",type:"text",hint:"\u6A19\u984C"},null,8,["modelValue"])]),_:1}),e(r,null,{default:l(()=>[oe]),_:1}),e(r,{class:"q-pt-none"},{default:l(()=>[e(g,{modelValue:o.inside,"onUpdate:modelValue":a[8]||(a[8]=t=>o.inside=t),outline:"",hint:"\u5167\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1}),e(O,{align:"right",class:"text-white"},{default:l(()=>[x(e(n,{flat:"",color:"secondary",label:"\u53D6\u6D88"},null,512),[[C]]),e(n,{color:"teal",label:"\u65B0\u589E",onClick:H})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}};export{Ve as default};
