import{Q as u}from"./QTable.4af85f87.js";import{aR as m,r as p,s as f,v as _,x as g,y as h,d as n,Q as b,aW as r}from"./index.9b6ce990.js";import"./use-key-composition.cd3e2b18.js";import"./QCheckbox.e2327c15.js";const w={class:"q-pa-md text-center"},k={__name:"UserAdmin",setup(y){const l=m(),o=p([]),c=[{name:"id",required:!0,label:"id",align:"left",field:e=>e.id,format:e=>`${e}`,sortable:!0},{name:"account",align:"left",label:"account",field:"account",sortable:!0},{name:"name",align:"left",label:"name",field:"name",sortable:!0},{name:"phone",align:"left",label:"phone",field:"phone",sortable:!0},{name:"role",align:"left",label:"role",field:"role",sortable:!0}],a=f([]),s=async()=>{const e=await r.get("/users/all");console.log(e.data.result.data);let t=0;for(t=0;t<e.data.result.data.length;t++)a.push({id:e.data.result.data[t]._id,account:e.data.result.data[t].account,name:e.data.result.data[t].name,phone:e.data.result.data[t].phone,role:e.data.result.data[t].role});l.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u6703\u54E1\u53D6\u5F97\u6210\u529F"})};s();const d=async()=>{try{const e=await r.delete(`/users/${o.value[0].id}`);for(console.log(e),l.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u6210\u529F"});a.length;)a.pop();s()}catch{l.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u5931\u6557"})}};return(e,t)=>(_(),g("section",null,[h("div",w,[n(u,{title:"\u6703\u54E1\u7BA1\u7406",rows:a,columns:c,"row-key":"name",selection:"single",selected:o.value,"onUpdate:selected":t[0]||(t[0]=i=>o.value=i)},null,8,["rows","selected"]),n(b,{icon:"delete",label:"\u522A\u9664",onClick:d,class:"q-ma-xl",color:"teal"})])]))}};export{k as default};
