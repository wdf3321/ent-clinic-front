import{aX as B,aY as Q,r as b,aR as H,s as M,v as _,x as h,y as s,aZ as p,E as N,a_ as w,aP as C,d as e,Q as i,z as l,F as P,aW as T,H as $,M as A,aN as g}from"./index.6b3f111e.js";import{Q as j,d as z}from"./QTable.5609f7bb.js";import{Q as n}from"./QCardSection.6a14260f.js";import{Q as k,a as E,b as F}from"./QTime.9a9997c5.js";import{Q as v}from"./QInput.f93cb116.js";import{Q as I}from"./QCardActions.952a51b5.js";import{Q as R}from"./QCard.f2b3d74e.js";import{C as y}from"./ClosePopup.a09eba65.js";import"./use-key-composition.c0248507.js";import"./QCheckbox.a5055e4b.js";import"./use-cache.b0833c75.js";const W={key:1},X={class:"q-pa-md text-center"},Z={class:"q-mt-xl"},G={class:"text-center q-pa-xl"},J=s("div",{class:"text-h6"},"\u65E5\u671F",-1),K={class:"row items-center justify-end"},L={class:"row items-center justify-end"},O=s("div",{class:"text-h6"},"\u6A19\u984C",-1),ee=s("div",{class:"text-h6"},"\u5167\u5BB9",-1),pe={__name:"ArticleAdmin",setup(te){const{articles:r,loading:q,error:x}=B(Q()),u=b([]),m=b(!1),f=H(),o=M({date:"2022-01-01 00:00",title:"",inside:""}),d=Q();d.getArticles();const Y=()=>{d.deleteArticle()},D=async()=>{var c;try{const t=await T.delete(`/articles/delete/${(c=u.value[0])==null?void 0:c._id}`);for(console.log(t),f.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u6210\u529F"});r.length;)r.pop();d.getArticles()}catch(t){console.log(t),f.notify({color:"red-4",textColor:"white",icon:"cloud_done",message:"\u522A\u9664\u5931\u6557"})}},U=()=>{for(d.createArticle(o),f.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"\u65B0\u589E\u6210\u529F"}),m.value=!1,o.date="",o.title="",o.inside="";r.length;)r.pop();d.getArticles()},S=[{name:"date",required:!0,label:"\u6642\u9593",align:"left",field:c=>c.date,sortable:!0},{name:"title",align:"left",label:"\u6A19\u984C",field:"title",sortable:!0},{name:"id",align:"right",label:"id",field:"_id",sortable:!0}];return(c,t)=>{var V;return _(),h(P,null,[s("section",null,[p(q)?(_(),N($,{key:0,color:"primary",size:"500px"})):w("",!0),p(x)?(_(),h("p",W,C(p(x).message),1)):w("",!0),s("div",X,[e(j,{title:"\u6D88\u606F\u7BA1\u7406",rows:p(r),columns:S,"row-key":"title",selection:"single",selected:u.value,"onUpdate:selected":t[0]||(t[0]=a=>u.value=a)},null,8,["rows","selected"]),s("div",Z,"\u5167\u5BB9\u9810\u89BD\uFF1A"+C((V=u.value[0])==null?void 0:V.inside),1)]),s("div",G,[e(i,{icon:"add",color:"primary",onClick:t[1]||(t[1]=a=>m.value=!0),class:"q-mx-lg",label:"\u65B0\u589E\u6D88\u606F"}),e(i,{onClick:Y,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u6700\u820A",class:"q-mx-lg"}),e(i,{onClick:D,type:"submit",color:"teal",icon:"delete",label:"\u522A\u9664\u9078\u64C7",class:"q-mx-lg"})])]),e(z,{modelValue:m.value,"onUpdate:modelValue":t[7]||(t[7]=a=>m.value=a),persistent:""},{default:l(()=>[e(R,{style:{"min-width":"400px"}},{default:l(()=>[e(n,null,{default:l(()=>[J]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{filled:"",modelValue:o.date,"onUpdate:modelValue":t[4]||(t[4]=a=>o.date=a)},{prepend:l(()=>[e(A,{name:"event",class:"cursor-pointer"},{default:l(()=>[e(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(E,{modelValue:o.date,"onUpdate:modelValue":t[2]||(t[2]=a=>o.date=a),mask:"YYYY-MM-DD HH:mm"},{default:l(()=>[s("div",K,[g(e(i,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),append:l(()=>[e(A,{name:"access_time",class:"cursor-pointer"},{default:l(()=>[e(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:l(()=>[e(F,{modelValue:o.date,"onUpdate:modelValue":t[3]||(t[3]=a=>o.date=a),mask:"YYYY-MM-DD HH:mm",format24h:"","now-btn":""},{default:l(()=>[s("div",L,[g(e(i,{label:"Close",color:"primary",flat:""},null,512),[[y]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(n,null,{default:l(()=>[O]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{modelValue:o.title,"onUpdate:modelValue":t[5]||(t[5]=a=>o.title=a),outline:"",type:"text",hint:"\u6A19\u984C"},null,8,["modelValue"])]),_:1}),e(n,null,{default:l(()=>[ee]),_:1}),e(n,{class:"q-pt-none"},{default:l(()=>[e(v,{modelValue:o.inside,"onUpdate:modelValue":t[6]||(t[6]=a=>o.inside=a),outline:"",hint:"\u5167\u5BB9",type:"textarea"},null,8,["modelValue"])]),_:1}),e(I,{align:"right",class:"text-white"},{default:l(()=>[g(e(i,{flat:"",color:"secondary",label:"\u53D6\u6D88"},null,512),[[y]]),e(i,{color:"teal",label:"\u65B0\u589E",onClick:U})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{pe as default};
